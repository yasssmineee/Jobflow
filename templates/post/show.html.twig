{% extends 'base.html.twig' %}

{% block header %}
    <div class="collapse navbar-collapse bg-transparent" id="navbarCollapse">
        <div class="navbar-nav ms-auto mx-xl-auto p-0">
            <a href="index.html" class="nav-item nav-link active text-secondary">Home</a>
            <a href="about.html" class="nav-item nav-link">About</a>
            <a href="service.html" class="nav-item nav-link">Services</a>
            <a href="project.html" class="nav-item nav-link">Projects</a>
            <div class="nav-item dropdown">
                <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Pages</a>
                <div class="dropdown-menu rounded">
                    <a href="http://127.0.0.1:8000/post/" class="nav-item nav-link">posts</a>
                    <a href="http://127.0.0.1:8000/" class="dropdown-item">Events</a>
                    <a href="project.html" class="nav-item nav-link">Projects</a>
                    <a href="team.html" class="dropdown-item">Our Team</a>
                    <a href="testimonial.html" class="dropdown-item">Testimonial</a>
                    <a href="404.html" class="dropdown-item">404 Page</a>
                </div>
            </div>
            <a href="contact.html" class="nav-item nav-link">Contact</a>
        </div>
    </div>
{% endblock %}

{% block title %}Post {% endblock %}

{% block body %}
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <div class="container" style="margin-top: 50px;">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="row no-gutters">
                        <div class="col-md-4">
                            <img class="card-img rounded-lg" src="{{ asset('assets/' ~ post.image) }}" alt="Image Description" style="height: 100%;">
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <h5 class="card-title">{{ post.name }}</h5>
                                <p class="card-text">{{ post.contenu }}</p>
                                <h5>{{ post.getComment()|length }} comments</h5>
                                <ul class="list-inline">
                                    <li class="list-inline-item">
                                        <form method="post" action="{{ path('likes', {'id': post.id}) }}">
                                            <button class="btn btn-link">
                                                <i class="fa fa-thumbs-up"></i> {{ post.getPostReactions().getLikes() }}
                                            </button>
                                        </form>
                                    </li>
                                    <li class="list-inline-item">
                                        <form method="post" action="{{ path('Dislikes', {'id': post.id}) }}">
                                            <button class="btn btn-link">
                                                <i class="fa fa-thumbs-down"></i> {{ post.getPostReactions().getDislike() }}
                                            </button>
                                        </form>
                                    </li>
                                </ul>
                                <a href="{{ path('app_post_index') }}" >
                                    <i class="fa fa-arrow-left"></i> Back to List
                                </a>
                                <a href="{{ path('app_post_edit', {'id': post.id}) }}" class="btn btn-primary">Edit</a>
                                <a href="{{ path('app_post_new') }}" class="btn btn-success">Create New</a>
                                {{ include('post/_delete_form.html.twig') }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container" style="margin-top: 50px;">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="form-container">
                    {{ include('comment/_form.html.twig') }}
                </div>
            </div>
        </div>
    </div>

    <style>
        .form-container {
            width: 100%;
            max-width: 600px; /* Adjust max-width as needed */
            margin: 0 auto; /* Center the form horizontally */
        }
    </style>

    {% block body0 %}
        <div class="headings d-flex justify-content-between align-items-center mb-3">
            <!-- Additional content here -->
        </div>
        {% for comment in comments %}
            <div class="container mt-5"  style="margin-bottom: 20px;">
                <div class="row d-flex justify-content-center">
                    <div class="col-md-8">
                        <div class="card p-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="user d-flex flex-row align-items-center">
                                    <img  src="{{ asset('assets/Untitled.png') }}" width="30" class="user-img rounded-circle mr-2">
                                    <span>
                                        <small class="font-weight-bold text-primary">{{ comment.name }}</small> <br>
                                        <small class="font-weight-bold">{{ comment.contenu }}</small>
                                    </span>
                                </div>
                                <small>{{ comment.date ? comment.date|date('Y-m-d') : '' }}</small>
                            </div>

                            <div class="action d-flex justify-content-between mt-2 align-items-center">
                                <div class="reply px-4">
                                    <small>
                                        <a href="{{ path('app_comment_show', {'id': comment.id}) }}">show</a></small>
                                    <span class="dots"></span>
                                    <small>
                                        <a href="{{ path('app_comment_edit', {'id': comment.id}) }}">edit</a></small>
                                    <span class="dots"></span>
                                    <small>Translate</small>
                                </div>
                                <div class="icons align-items-center">
                                    <i class="fa fa-star text-warning"></i>
                                    <i class="fa fa-check-circle-o check-icon"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="container mt-5">
                <div class="row d-flex justify-content-center">
                    <div class="col-md-8">
                        <div class="alert alert-info" role="alert">
                            No comments found.
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    {% endblock %}
{% endblock %}
